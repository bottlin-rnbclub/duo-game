{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\russi\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\duo\\\\duo-game\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport HeroSettings from './HeroSettings';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const [heroes, setHeroes] = useState([{\n    x: 50,\n    y: 150,\n    dy: 2,\n    color: 'red',\n    spellColor: 'blue',\n    spellFrequency: 1000,\n    speed: 2\n  }, {\n    x: 550,\n    y: 150,\n    dy: 2,\n    color: 'green',\n    spellColor: 'purple',\n    spellFrequency: 1000,\n    speed: 2\n  }]);\n  const [spells, setSpells] = useState([]);\n  const [mousePosition, setMousePosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedHero, setSelectedHero] = useState(null);\n\n  // Function to draw heroes, memoized to avoid unnecessary re-renders\n  const drawHeroes = useCallback(ctx => {\n    heroes.forEach(hero => {\n      ctx.fillStyle = hero.color;\n      ctx.beginPath();\n      ctx.arc(hero.x, hero.y, 20, 0, Math.PI * 2);\n      ctx.fill();\n    });\n  }, [heroes]);\n\n  // Function to draw spells, memoized to avoid unnecessary re-renders\n  const drawSpells = useCallback(ctx => {\n    spells.forEach(spell => {\n      ctx.fillStyle = spell.color;\n      ctx.beginPath();\n      ctx.arc(spell.x, spell.y, 5, 0, Math.PI * 2);\n      ctx.fill();\n    });\n  }, [spells]);\n\n  // Update hero positions, memoized to avoid unnecessary re-renders\n  const updateHeroesPosition = useCallback(() => {\n    setHeroes(prevHeroes => prevHeroes.map(hero => {\n      let newY = hero.y + hero.dy * hero.speed;\n      if (newY < 20 || newY > canvasRef.current.height - 20) {\n        hero.dy = -hero.dy;\n      }\n      if (Math.abs(newY - mousePosition.y) < 20) {\n        hero.dy = -hero.dy;\n      }\n      return {\n        ...hero,\n        y: newY\n      };\n    }));\n  }, [mousePosition]);\n\n  // Update spells positions, memoized to avoid unnecessary re-renders\n  const updateSpellsPosition = useCallback(() => {\n    setSpells(prevSpells => prevSpells.map(spell => ({\n      ...spell,\n      x: spell.x + spell.dx,\n      y: spell.y + spell.dy\n    })).filter(spell => spell.x > 0 && spell.x < canvasRef.current.width && spell.y > 0 && spell.y < canvasRef.current.height));\n  }, []);\n\n  // Detect collisions between spells and heroes, memoized to avoid unnecessary re-renders\n  const detectCollisions = useCallback(() => {\n    spells.forEach(spell => {\n      heroes.forEach(hero => {\n        if (Math.hypot(spell.x - hero.x, spell.y - hero.y) < 25) {\n          // Collision detected\n          setSpells(prevSpells => prevSpells.filter(s => s !== spell));\n        }\n      });\n    });\n  }, [spells, heroes]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const updateGame = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawHeroes(ctx);\n      drawSpells(ctx);\n      updateHeroesPosition();\n      updateSpellsPosition();\n      detectCollisions();\n      requestAnimationFrame(updateGame);\n    };\n    updateGame();\n  }, [drawHeroes, drawSpells, updateHeroesPosition, updateSpellsPosition, detectCollisions]);\n  const handleMouseMove = e => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    setMousePosition({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n  const handleCanvasClick = e => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const clickY = e.clientY - rect.top;\n    heroes.forEach((hero, index) => {\n      if (Math.hypot(hero.x - clickX, hero.y - clickY) < 20) {\n        setSelectedHero(index);\n      }\n    });\n  };\n  const handleChangeSettings = (index, settings) => {\n    setHeroes(prevHeroes => prevHeroes.map((hero, i) => i === index ? {\n      ...hero,\n      ...settings\n    } : hero));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 600,\n      height: 400,\n      onMouseMove: handleMouseMove,\n      onClick: handleCanvasClick,\n      style: {\n        border: '1px solid black'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), selectedHero !== null && /*#__PURE__*/_jsxDEV(HeroSettings, {\n      hero: heroes[selectedHero],\n      onChange: settings => handleChangeSettings(selectedHero, settings)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"e4egxy9yraIR5yjq2tL1u1d1cCc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","HeroSettings","jsxDEV","_jsxDEV","App","_s","canvasRef","heroes","setHeroes","x","y","dy","color","spellColor","spellFrequency","speed","spells","setSpells","mousePosition","setMousePosition","selectedHero","setSelectedHero","drawHeroes","ctx","forEach","hero","fillStyle","beginPath","arc","Math","PI","fill","drawSpells","spell","updateHeroesPosition","prevHeroes","map","newY","current","height","abs","updateSpellsPosition","prevSpells","dx","filter","width","detectCollisions","hypot","s","canvas","getContext","updateGame","clearRect","requestAnimationFrame","handleMouseMove","e","rect","getBoundingClientRect","clientX","left","clientY","top","handleCanvasClick","clickX","clickY","index","handleChangeSettings","settings","i","children","ref","onMouseMove","onClick","style","border","fileName","_jsxFileName","lineNumber","columnNumber","onChange","_c","$RefreshReg$"],"sources":["C:/Users/russi/OneDrive/Рабочий стол/duo/duo-game/src/App.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport HeroSettings from './HeroSettings';\n\nconst App = () => {\n  const canvasRef = useRef(null);\n  const [heroes, setHeroes] = useState([\n    { x: 50, y: 150, dy: 2, color: 'red', spellColor: 'blue', spellFrequency: 1000, speed: 2 },\n    { x: 550, y: 150, dy: 2, color: 'green', spellColor: 'purple', spellFrequency: 1000, speed: 2 }\n  ]);\n  const [spells, setSpells] = useState([]);\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });\n  const [selectedHero, setSelectedHero] = useState(null);\n\n  // Function to draw heroes, memoized to avoid unnecessary re-renders\n  const drawHeroes = useCallback((ctx) => {\n    heroes.forEach(hero => {\n      ctx.fillStyle = hero.color;\n      ctx.beginPath();\n      ctx.arc(hero.x, hero.y, 20, 0, Math.PI * 2);\n      ctx.fill();\n    });\n  }, [heroes]);\n\n  // Function to draw spells, memoized to avoid unnecessary re-renders\n  const drawSpells = useCallback((ctx) => {\n    spells.forEach(spell => {\n      ctx.fillStyle = spell.color;\n      ctx.beginPath();\n      ctx.arc(spell.x, spell.y, 5, 0, Math.PI * 2);\n      ctx.fill();\n    });\n  }, [spells]);\n\n  // Update hero positions, memoized to avoid unnecessary re-renders\n  const updateHeroesPosition = useCallback(() => {\n    setHeroes(prevHeroes =>\n      prevHeroes.map(hero => {\n        let newY = hero.y + hero.dy * hero.speed;\n        if (newY < 20 || newY > canvasRef.current.height - 20) {\n          hero.dy = -hero.dy;\n        }\n        if (Math.abs(newY - mousePosition.y) < 20) {\n          hero.dy = -hero.dy;\n        }\n        return { ...hero, y: newY };\n      })\n    );\n  }, [mousePosition]);\n\n  // Update spells positions, memoized to avoid unnecessary re-renders\n  const updateSpellsPosition = useCallback(() => {\n    setSpells(prevSpells =>\n      prevSpells.map(spell => ({\n        ...spell,\n        x: spell.x + spell.dx,\n        y: spell.y + spell.dy\n      }))\n      .filter(spell => spell.x > 0 && spell.x < canvasRef.current.width && spell.y > 0 && spell.y < canvasRef.current.height)\n    );\n  }, []);\n\n  // Detect collisions between spells and heroes, memoized to avoid unnecessary re-renders\n  const detectCollisions = useCallback(() => {\n    spells.forEach(spell => {\n      heroes.forEach(hero => {\n        if (Math.hypot(spell.x - hero.x, spell.y - hero.y) < 25) {\n          // Collision detected\n          setSpells(prevSpells => prevSpells.filter(s => s !== spell));\n        }\n      });\n    });\n  }, [spells, heroes]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    const updateGame = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawHeroes(ctx);\n      drawSpells(ctx);\n      updateHeroesPosition();\n      updateSpellsPosition();\n      detectCollisions();\n      requestAnimationFrame(updateGame);\n    };\n\n    updateGame();\n  }, [drawHeroes, drawSpells, updateHeroesPosition, updateSpellsPosition, detectCollisions]);\n\n  const handleMouseMove = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    setMousePosition({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n\n  const handleCanvasClick = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const clickY = e.clientY - rect.top;\n\n    heroes.forEach((hero, index) => {\n      if (Math.hypot(hero.x - clickX, hero.y - clickY) < 20) {\n        setSelectedHero(index);\n      }\n    });\n  };\n\n  const handleChangeSettings = (index, settings) => {\n    setHeroes(prevHeroes =>\n      prevHeroes.map((hero, i) => (i === index ? { ...hero, ...settings } : hero))\n    );\n  };\n\n  return (\n    <div>\n      <canvas\n        ref={canvasRef}\n        width={600}\n        height={400}\n        onMouseMove={handleMouseMove}\n        onClick={handleCanvasClick}\n        style={{ border: '1px solid black' }}\n      />\n      {selectedHero !== null && (\n        <HeroSettings\n          hero={heroes[selectedHero]}\n          onChange={(settings) => handleChangeSettings(selectedHero, settings)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}